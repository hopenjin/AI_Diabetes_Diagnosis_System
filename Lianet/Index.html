<!DOCTYPE html>
<html>

<head>
  <!--ADDITTONAL LINKS TO MAKE THE EXAMPLES LOOK PRETTY-->
  <!-- Bootstrap core CSS for better functionality-->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <!-- Font Awesome -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" rel="stylesheet" />
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" rel="stylesheet" />
  <!-- MDB -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/3.10.1/mdb.min.css" rel="stylesheet" />

  <!-- CORE FILES FOR PERFECT SCROLLBAR FUNCTIONALITY -->
  <!-- The Perfect Scrollbar CSS files -->
  <link href="css/perfect-scrollbar.css" rel="stylesheet">
  <!-- The Perfect Scrollbar JS files -->
  <script src="js/perfect-scrollbar.js"></script>

  <!--DEFINE CONTAINER-->
  <style>
    body {
      background-color: rgba(247, 247, 247, 0.801);
    }

    #test {
      background-color: rgb(255, 255, 255);
      position: relative;
      margin: 15px auto;
      padding: 0px;
      width: 600px;
      height: 500px;
      overflow: auto;
    }

    #test .content {
      width: 1280px;
      height: 900px;
    }

  </style>

</head>

<body>
  <!--EXAMPLE CONTENT-->
  <section class="text-center">

    <div id="container" class="rounded">

      <!--EXAMPLE CONTENT-->
      <section class="pb-4">
        <div class="bg-white border rounded-5">
          
          <section class="p-4 w-100" style="background-color: #eee; border-radius: .5rem .5rem 0 0;">
          
      
            <div class="row d-flex justify-content-center">
              <div class="col-md-10 col-lg-8 col-xl-6">
      
                <div class="card" id="chat2">
                  <div class="card-header d-flex justify-content-between align-items-center p-3">
                    <h5 class="mb-0">Chat</h5>
                    <button type="button" class="btn btn-primary btn-sm" data-mdb-ripple-color="dark">Let's Chat App</button>
                  </div>
                  <div id="test" class="test card-body perfect-scrollbar ps ps--active-y" data-mdb-perfect-scrollbar="true" style="position: relative; height: 400px">
      <div class="conver">
        <div class="d-flex flex-row justify-content-start">
          <img src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-chat/ava3-bg.webp" alt="avatar 1" style="width: 45px; height: 100%;">
          <div>
            <p class="small p-2 ms-3 mb-1 rounded-3" style="background-color: #f5f6f7;">Hi! Please tell me your name.</p>

            <p class="small ms-3 mb-3 rounded-3 text-muted">23:58</p>
          </div>
        </div>
      </div>
                    
      
                  
                    <div class="ps__rail-x" style="left: 0px; bottom: -856px;"><div class="ps__thumb-x" tabindex="0" style="left: 0px; width: 0px;"></div></div><div class="ps__rail-y" style="top: 856px; height: 400px; right: 0px;"><div class="ps__thumb-y" tabindex="0" style="top: 273px; height: 127px;"></div></div>
                  </div>
                  <div class="card-footer text-muted d-flex justify-content-start align-items-center p-3">
                    <img src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-chat/ava3-bg.webp" alt="avatar 3" style="width: 40px; height: 100%;">
                    <input type="text" class="form-control form-control-lg" id="userMessage" placeholder="Type message">
                  
                    <a id="send" class="ms-3" href="#!"><i class="fas fa-paper-plane"></i></a>
                  </div>
                </div>
      
              </div>
            </div>
          </section>
          
          
        
          
          
        </div>
      </section>
      <!--EXAMPLE CONTENT-->


    </div>
  </section>
  <!--EXAMPLE CONTENT-->




  <!--ADDITTONAL SCRIPTS TO MAKE THE EXAMPLE CONTENT LOOK PRETTY-->
  <section>
    <!--jQuery-->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    <!-- Bootstrap core JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous">
    </script>

    <!-- MDB core JavaScript -->
    <!-- MDB -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/3.10.1/mdb.min.js"></script>
    </script>

  </section>
  <!-- Footer -->
  <footer class="text-white d-block shadow-5" style="background-color: 	hsl(195, 53%, 88%);">
  </footer>
  <!-- Footer -->

  <script>
    $( "#send" ).on( "click", function() {
      var usermessage=$("#userMessage").val();
      $("#userMessage").val("");
      console.log("usermsg: ", usermessage);
      var userFirst="<div class='d-flex flex-row justify-content-end mb-4 pt-1'><div><p class='small p-2 me-3 mb-1 text-white rounded-3 bg-primary'>";
      var userLast="</p><p class='small me-3 mb-3 rounded-3 text-muted d-flex justify-content-end'>00:06</p></div> <img src='https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-chat/ava4-bg.webp' alt='avatar 1' style='width: 45px; height: 100%;'>  </div>";
      var userHtmltoAdd=userFirst+usermessage+userLast;
      
      const url = 'http://127.0.0.1:8000/process-text';
      const request_data = {
        text: usermessage,
      };
      fetch(url, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify(request_data),
      })
        .then(response => response.json())
        .then(data => {
          console.log('Success:', data);
          var aimessage = data
          var aiFirst="<div class='d-flex flex-row justify-content-start'>  <img src='https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-chat/ava3-bg.webp' alt='avatar 1' style='width: 45px; height: 100%;'>  <div> <p class='small p-2 ms-3 mb-1 rounded-3' style='background-color: #f5f6f7;'>";
          var aiLast="</p><p class='small ms-3 mb-3 rounded-3 text-muted'>23:58</p></div></div>";
          var aiHtmltoAdd=aiFirst+aimessage+aiLast;

          $( userHtmltoAdd ).appendTo( ".conver" );
          $( aiHtmltoAdd ).appendTo( ".conver" );
        })
        .catch(error => {
          console.error('Error:', error);
        });
    
    } );
    </script>
</body>

</html>